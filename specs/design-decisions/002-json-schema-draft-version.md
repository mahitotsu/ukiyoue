# ADR-002: JSON Schema Draft ç‰ˆã®é¸å®š

## Status

**æ‰¿èªæ¸ˆã¿** (Accepted)

## Context

JSON Schema ã«ã¯è¤‡æ•°ã® Draftï¼ˆä»•æ§˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ãŒå­˜åœ¨ã™ã‚‹ï¼š

- **Draft-07** (2018 å¹´) - åºƒãæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹
- **Draft 2019-09** (2019 å¹´) - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã€æ–°æ©Ÿèƒ½è¿½åŠ 
- **Draft 2020-12** (2020 å¹´) - æœ€æ–°å®‰å®šç‰ˆ

**å‰æ**: ADR-001 ã§ã€JSON Schema ã‚’ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæ±ºå®šã—ã¦ã„ã‚‹ã€‚

ã©ã® Draft ç‰ˆã‚’æ¡ç”¨ã™ã‚‹ã‹ã¯ã€ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆã€æ©Ÿèƒ½æ€§ã€å°†æ¥æ€§ã«å½±éŸ¿ã™ã‚‹ã€‚

### æº€ãŸã™ã¹ãè¦ä»¶ï¼ˆspecs/requirements.md ã‚ˆã‚Šï¼‰

ã“ã®æ±ºå®šã¯ã€ä»¥ä¸‹ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è¦ä»¶ã«ç›´æ¥å½±éŸ¿ã™ã‚‹ï¼š

| è¦ä»¶ ID         | è¦ä»¶å                 | é–¢é€£æ€§                                 |
| --------------- | ---------------------- | -------------------------------------- |
| **FR-AUTO-001** | æ§‹é€ åŒ–ã•ã‚ŒãŸå½¢å¼ã®å®šç¾© | ğŸ”´ Critical - ã‚¹ã‚­ãƒ¼ãƒæ©Ÿèƒ½ã®å……å®Ÿåº¦     |
| **FR-AUTO-002** | è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³     | ğŸ”´ Critical - ãƒãƒªãƒ‡ãƒ¼ã‚¿ã®æ€§èƒ½ãƒ»ä¿¡é ¼æ€§ |
| **FR-CONV-002** | å‹•çš„ãªæƒ…å ±å†æ§‹æˆ       | ğŸŸ¡ High - ã‚¹ã‚­ãƒ¼ãƒã®æŸ”è»Ÿæ€§             |

Draft ç‰ˆã®é¸æŠã¯ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ€§èƒ½ã€ã‚¨ãƒ‡ã‚£ã‚¿æ”¯æ´ã€ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®è±Šå¯Œã•ã«ç›´çµã™ã‚‹ã€‚

## Decision Drivers

### 1. Draft-07 (2018)

**ç‰¹å¾´**:

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "name": { "type": "string" },
    "age": { "type": "integer", "minimum": 0 }
  },
  "required": ["name"]
}
```

**è©•ä¾¡**:
| é …ç›® | ã‚¹ã‚³ã‚¢ | èª¬æ˜ |
|------|--------|------|
| ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ | â­â­â­â­â­ | æœ€ã‚‚åºƒãã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ |
| æ©Ÿèƒ½æ€§ | â­â­â­â­ | åŸºæœ¬çš„ãªæ©Ÿèƒ½ã¯å……å®Ÿ |
| æˆç†Ÿåº¦ | â­â­â­â­â­ | éå¸¸ã«å®‰å®š |
| å°†æ¥æ€§ | â­â­â­ | å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |

**ã‚µãƒãƒ¼ãƒˆçŠ¶æ³**:

- âœ… ajv (JavaScript): å®Œå…¨ã‚µãƒãƒ¼ãƒˆ
- âœ… jsonschema (Python): å®Œå…¨ã‚µãƒãƒ¼ãƒˆ
- âœ… VSCode: å®Œå…¨ã‚µãƒãƒ¼ãƒˆ
- âœ… ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ : æœ€ã‚‚è±Šå¯Œ

**é•·æ‰€**:

- æœ€ã‚‚åºƒãæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹
- ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚µãƒãƒ¼ãƒˆãŒæœ€ã‚‚å……å®Ÿ
- æƒ…å ±ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè±Šå¯Œ
- å®‰å®šæ€§ãŒé«˜ã„

**çŸ­æ‰€**:

- å¤ã„ä»•æ§˜ï¼ˆ2018 å¹´ï¼‰
- æ–°æ©Ÿèƒ½ãŒãªã„
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚Œã¦ã„ãªã„

---

### 2. Draft 2019-09

**ç‰¹å¾´**:

```json
{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "$id": "https://example.com/schemas/person.schema.json",
  "$defs": {
    "address": {
      "type": "object",
      "properties": {
        "street": { "type": "string" },
        "city": { "type": "string" }
      }
    }
  },
  "type": "object",
  "properties": {
    "name": { "type": "string" },
    "address": { "$ref": "#/$defs/address" }
  }
}
```

**ä¸»ãªå¤‰æ›´ç‚¹**:

- `definitions` â†’ `$defs`ã«å¤‰æ›´ï¼ˆã‚ˆã‚Šæ˜ç¢ºï¼‰
- `$recursiveRef` / `$recursiveAnchor` è¿½åŠ 
- `unevaluatedProperties` / `unevaluatedItems` è¿½åŠ 
- ãƒ¡ã‚¿ã‚¹ã‚­ãƒ¼ãƒã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–

**è©•ä¾¡**:
| é …ç›® | ã‚¹ã‚³ã‚¢ | èª¬æ˜ |
|------|--------|------|
| ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ | â­â­â­â­ | ä¸»è¦ãƒ„ãƒ¼ãƒ«ã¯ã‚µãƒãƒ¼ãƒˆ |
| æ©Ÿèƒ½æ€§ | â­â­â­â­â­ | æ–°æ©Ÿèƒ½ãŒå……å®Ÿ |
| æˆç†Ÿåº¦ | â­â­â­â­ | å®‰å®šã—ã¦ã„ã‚‹ |
| å°†æ¥æ€§ | â­â­â­â­ | æ¯”è¼ƒçš„æ–°ã—ã„ |

**ã‚µãƒãƒ¼ãƒˆçŠ¶æ³**:

- âœ… ajv: å®Œå…¨ã‚µãƒãƒ¼ãƒˆï¼ˆv8+ï¼‰
- âœ… jsonschema (Python): ã‚µãƒãƒ¼ãƒˆ
- âœ… VSCode: ã‚µãƒãƒ¼ãƒˆ
- âš ï¸ ä¸€éƒ¨å¤ã„ãƒ„ãƒ¼ãƒ«ã¯æœªå¯¾å¿œ

**é•·æ‰€**:

- `unevaluatedProperties`ã§å³å¯†ãªæ¤œè¨¼
- `$defs`ã§å‘½åãŒæ˜ç¢º
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸæ§‹é€ 

**çŸ­æ‰€**:

- Draft-07 ã‚ˆã‚Šæ¡ç”¨ç‡ãŒä½ã„
- ä¸€éƒ¨ãƒ„ãƒ¼ãƒ«ãŒæœªå¯¾å¿œ
- ç§»è¡ŒæœŸã®ä»•æ§˜

---

### 3. Draft 2020-12 (æœ€æ–°)

**ç‰¹å¾´**:

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/person.schema.json",
  "$defs": {
    "positiveInteger": {
      "type": "integer",
      "minimum": 1
    }
  },
  "type": "object",
  "properties": {
    "age": { "$ref": "#/$defs/positiveInteger" },
    "score": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100
    }
  },
  "prefixItems": [{ "type": "string" }, { "type": "number" }]
}
```

**ä¸»ãªå¤‰æ›´ç‚¹**:

- `$recursiveRef` â†’ `$dynamicRef` / `$dynamicAnchor`ã«å¤‰æ›´
- `items` / `additionalItems` â†’ `prefixItems` / `items`ã«åˆ†é›¢
- `$vocabulary`ã§ã‚«ã‚¹ã‚¿ãƒ èªå½™å®šç¾©
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åé›†ã®æ˜ç¢ºåŒ–

**è©•ä¾¡**:
| é …ç›® | ã‚¹ã‚³ã‚¢ | èª¬æ˜ |
|------|--------|------|
| ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ | â­â­â­ | å¯¾å¿œä¸­ã€ã¾ã é™å®šçš„ |
| æ©Ÿèƒ½æ€§ | â­â­â­â­â­ | æœ€ã‚‚é«˜æ©Ÿèƒ½ |
| æˆç†Ÿåº¦ | â­â­â­ | æ¯”è¼ƒçš„æ–°ã—ã„ |
| å°†æ¥æ€§ | â­â­â­â­â­ | æœ€æ–°æ¨™æº– |

**ã‚µãƒãƒ¼ãƒˆçŠ¶æ³**:

- âœ… ajv: ã‚µãƒãƒ¼ãƒˆï¼ˆv8.12+ï¼‰
- âš ï¸ jsonschema (Python): éƒ¨åˆ†çš„ã‚µãƒãƒ¼ãƒˆ
- âœ… VSCode: éƒ¨åˆ†çš„ã‚µãƒãƒ¼ãƒˆ
- âš ï¸ å¤šãã®ãƒ„ãƒ¼ãƒ«ãŒå¯¾å¿œä¸­

**é•·æ‰€**:

- æœ€æ–°ã®æ©Ÿèƒ½
- ã‚ˆã‚Šæ˜ç¢ºãªä»•æ§˜
- å°†æ¥æ€§ãŒé«˜ã„

**çŸ­æ‰€**:

- ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆãŒã¾ã é™å®šçš„
- æƒ…å ±ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå°‘ãªã„
- ç§»è¡Œã‚³ã‚¹ãƒˆãŒé«˜ã„

---

## æ¯”è¼ƒãƒãƒˆãƒªã‚¯ã‚¹

| é …ç›®               | Draft-07   | 2019-09    | 2020-12    |
| ------------------ | ---------- | ---------- | ---------- |
| **ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ** | â­â­â­â­â­ | â­â­â­â­   | â­â­â­     |
| **æ©Ÿèƒ½æ€§**         | â­â­â­â­   | â­â­â­â­â­ | â­â­â­â­â­ |
| **æˆç†Ÿåº¦**         | â­â­â­â­â­ | â­â­â­â­   | â­â­â­     |
| **å°†æ¥æ€§**         | â­â­â­     | â­â­â­â­   | â­â­â­â­â­ |
| **å­¦ç¿’ã‚³ã‚¹ãƒˆ**     | â­â­â­â­â­ | â­â­â­â­   | â­â­â­     |
| **æƒ…å ±é‡**         | â­â­â­â­â­ | â­â­â­â­   | â­â­â­     |
| **VSCode çµ±åˆ**    | â­â­â­â­â­ | â­â­â­â­   | â­â­â­â­   |
| **ajv ã‚µãƒãƒ¼ãƒˆ**   | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **Total**          | **38/40**  | **36/40**  | **33/40**  |

---

## Decision

### âœ… æ¡ç”¨: **Draft-07 (with 2019-09 features)**

**æˆ¦ç•¥**: Draft-07 ã‚’åŸºæœ¬ã¨ã—ã€å¿…è¦ã«å¿œã˜ã¦ 2019-09 ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ukiyoue.dev/schemas/document-base.schema.json",
  "title": "Document Base Schema",
  "type": "object",
  "definitions": {
    "metadata": {
      "type": "object",
      "required": ["type", "title", "version"],
      "properties": {
        "type": { "type": "string" },
        "title": { "type": "string" },
        "version": { "type": "string" }
      }
    }
  },
  "required": ["$schema", "metadata", "content"],
  "properties": {
    "$schema": { "type": "string", "format": "uri" },
    "metadata": { "$ref": "#/definitions/metadata" },
    "content": { "type": "object" }
  }
}
```

### ç†ç”±

1. **æœ€å¤§ã®ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ**
   - ajv: å®Œå…¨ã‚µãƒãƒ¼ãƒˆã€æœ€é«˜æ€§èƒ½
   - VSCode: å®Œå…¨ã‚µãƒãƒ¼ãƒˆã€è‡ªå‹•è£œå®Œãƒ»æ¤œè¨¼
   - jsonschema (Python): å®Œå…¨ã‚µãƒãƒ¼ãƒˆ
   - ã™ã¹ã¦ã®ä¸»è¦ãƒ„ãƒ¼ãƒ«ãŒå¯¾å¿œ

2. **å®‰å®šæ€§ã¨å®Ÿç¸¾**
   - 2018 å¹´ã‹ã‚‰ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
   - å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å®Ÿç¸¾å¤šæ•°
   - ãƒã‚°ãŒå°‘ãªãå®‰å®š

3. **è±Šå¯Œãªæƒ…å ±ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
   - ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€ã‚µãƒ³ãƒ—ãƒ«ãŒè±Šå¯Œ
   - Stack Overflow ç­‰ã®æƒ…å ±å¤šæ•°
   - å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„

4. **æ®µéšçš„ç§»è¡Œãƒ‘ã‚¹**
   - å°†æ¥çš„ã« 2019-09 ã‚„ 2020-12 ã¸ã®ç§»è¡Œå¯èƒ½
   - ajv ã¯è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¯¾å¿œ
   - å¾Œæ–¹äº’æ›æ€§ã‚’ä¿ã¡ãªãŒã‚‰æ–°æ©Ÿèƒ½è¿½åŠ å¯èƒ½

5. **å¿…è¦ååˆ†ãªæ©Ÿèƒ½**
   - Ukiyoue ã®è¦ä»¶ï¼ˆæ§‹é€ å®šç¾©ã€æ¤œè¨¼ï¼‰ã‚’æº€ãŸã™
   - `$ref`ã«ã‚ˆã‚‹å†åˆ©ç”¨
   - `pattern`ã€`enum`ã€`format`ç­‰ã®åˆ¶ç´„
   - è¤‡é›‘ãªã‚¹ã‚­ãƒ¼ãƒã«ã‚‚å¯¾å¿œ

### 2019-09/2020-12 ã®æ©Ÿèƒ½ãŒå¿…è¦ã«ãªã£ãŸå ´åˆ

ajv ã¯è¤‡æ•° Draft å¯¾å¿œã®ãŸã‚ã€å¿…è¦ã«å¿œã˜ã¦ä½µç”¨å¯èƒ½ï¼š

```javascript
import Ajv from "ajv";
import Ajv2019 from "ajv/dist/2019";
import Ajv2020 from "ajv/dist/2020";

// Draft-07ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
const ajv07 = new Ajv();

// Draft 2019-09ï¼ˆå¿…è¦ãªå ´åˆï¼‰
const ajv2019 = new Ajv2019();

// Draft 2020-12ï¼ˆå¿…è¦ãªå ´åˆï¼‰
const ajv2020 = new Ajv2020();
```

---

## Consequences

### Positive

- âœ… æœ€é«˜ã®ãƒ„ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ
- âœ… VSCode ã®å®Œå…¨ãªè‡ªå‹•è£œå®Œãƒ»æ¤œè¨¼
- âœ… ajv ã®æœ€é«˜æ€§èƒ½
- âœ… å®‰å®šæ€§ãŒé«˜ã„
- âœ… æƒ…å ±ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè±Šå¯Œ
- âœ… å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„
- âœ… æ—¢å­˜ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¨ã®äº’æ›æ€§

### Negative

- âš ï¸ 2019-09/2020-12 ã®æ–°æ©Ÿèƒ½ã¯ä½¿ãˆãªã„
- âš ï¸ å°†æ¥çš„ã«ç§»è¡ŒãŒå¿…è¦ã«ãªã‚‹å¯èƒ½æ€§

### Mitigation

- **æ–°æ©Ÿèƒ½ãŒå¿…è¦ãªå ´åˆ**:
  - ajv ã¯è¤‡æ•° Draft å¯¾å¿œãªã®ã§ä½µç”¨å¯èƒ½
  - ã‚¹ã‚­ãƒ¼ãƒã”ã¨ã« Draft ç‰ˆã‚’é¸æŠå¯èƒ½
- **å°†æ¥ã®ç§»è¡Œ**:
  - Draft-07 â†’ 2019-09 ã¯æ¯”è¼ƒçš„å®¹æ˜“
  - `definitions` â†’ `$defs`ã®ç½®æ›ãŒä¸»ãªå¤‰æ›´
  - æ®µéšçš„ç§»è¡ŒãŒå¯èƒ½

---

## Implementation Notes

### ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬æ§‹é€ 

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ukiyoue.dev/schemas/[schema-name].schema.json",
  "title": "Schema Title",
  "description": "Schema description",
  "type": "object",
  "definitions": {
    "reusableType": {
      "type": "object",
      "properties": {
        "field": { "type": "string" }
      }
    }
  },
  "required": ["field1", "field2"],
  "properties": {
    "field1": { "type": "string" },
    "field2": { "$ref": "#/definitions/reusableType" }
  }
}
```

### VSCode è¨­å®š

`.vscode/settings.json`:

```json
{
  "json.schemas": [
    {
      "fileMatch": ["schemas/*.schema.json"],
      "url": "http://json-schema.org/draft-07/schema#"
    }
  ]
}
```

### ajv ä½¿ç”¨ä¾‹

```typescript
import Ajv from "ajv";
import addFormats from "ajv-formats";

const ajv = new Ajv({
  allErrors: true, // ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼ã‚’åé›†
  verbose: true, // è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  strict: true, // å³å¯†ãƒ¢ãƒ¼ãƒ‰
  validateFormats: true, // formatæ¤œè¨¼ã‚’æœ‰åŠ¹åŒ–
});

addFormats(ajv); // email, uri, date-timeç­‰ã®formatè¿½åŠ 

const schema = {
  $schema: "http://json-schema.org/draft-07/schema#",
  type: "object",
  required: ["email"],
  properties: {
    email: {
      type: "string",
      format: "email",
    },
  },
};

const validate = ajv.compile(schema);
const valid = validate({ email: "test@example.com" });

if (!valid) {
  console.error(validate.errors);
}
```

---

## Requirements Traceability

ã“ã®æ±ºå®šãŒæº€ãŸã™ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è¦ä»¶ï¼š

### FR-AUTO-001: æ§‹é€ åŒ–ã•ã‚ŒãŸå½¢å¼ã®å®šç¾© âœ…

**å®Ÿç¾æ–¹æ³•**:

- Draft-07 ã®å……å®Ÿã—ãŸå‹ã‚·ã‚¹ãƒ†ãƒ ï¼ˆstring, number, object, array, enum ç­‰ï¼‰
- `properties`, `required`, `additionalProperties` ã«ã‚ˆã‚‹å³å¯†ãªæ§‹é€ å®šç¾©
- `$ref` ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒã®å†åˆ©ç”¨ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–

**åŠ¹æœ**:

- å¿…è¦ååˆ†ãªè¡¨ç¾åŠ›ã§å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹é€ ã‚’å®šç¾©å¯èƒ½
- ã‚¹ã‚­ãƒ¼ãƒã®éšå±¤åŒ–ãƒ»å†åˆ©ç”¨ã«ã‚ˆã‚Šä¿å®ˆæ€§å‘ä¸Š

---

### FR-AUTO-002: è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ âœ…

**å®Ÿç¾æ–¹æ³•**:

- ajv v8+ ã«ã‚ˆã‚‹æœ€é€Ÿãƒ»æœ€é«˜ç²¾åº¦ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- `pattern`, `minLength`, `format` ã«ã‚ˆã‚‹ç´°ã‹ã„åˆ¶ç´„
- `allErrors` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å…¨ã‚¨ãƒ©ãƒ¼ã‚’ä¸€åº¦ã«æ¤œå‡º

**åŠ¹æœ**:

- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆVSCode çµ±åˆï¼‰
- CI/CD ã§ã®è‡ªå‹•æ¤œè¨¼
- ã‚¨ãƒ©ãƒ¼æ¤œå‡ºç‡ 100%ã€False positive < 5%

---

### FR-CONV-002: å‹•çš„ãªæƒ…å ±å†æ§‹æˆ âœ…

**å®Ÿç¾æ–¹æ³•**:

- Draft-07 ã®æ¡ä»¶ä»˜ãã‚¹ã‚­ãƒ¼ãƒï¼ˆ`if-then-else`, `oneOf`, `anyOf`ï¼‰
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`audience`, `level`ï¼‰ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- æŸ”è»Ÿãªæ§‹é€ ã§å¤šæ§˜ãªãƒ“ãƒ¥ãƒ¼ç”Ÿæˆã‚’ã‚µãƒãƒ¼ãƒˆ

**åŠ¹æœ**:

- è¦–ç‚¹åˆ¥ãƒ»ç²’åº¦åˆ¥ã®ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆã«å¿…è¦ãªæ§‹é€ ã‚’è¡¨ç¾å¯èƒ½
- ã‚¹ã‚­ãƒ¼ãƒãƒ¬ãƒ™ãƒ«ã§å‹•çš„å†æ§‹æˆã®ä»•æ§˜ã‚’ä¿è¨¼

---

## Related Decisions

- **ADR-001: ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸å®š** - JSON Schema æ¡ç”¨ï¼ˆå‰æï¼‰
- **ADR-004: ãƒ„ãƒ¼ãƒ«å®Ÿè£…é¸å®š** - ajv æ¡ç”¨ï¼ˆDraft-07 å®Œå…¨ã‚µãƒãƒ¼ãƒˆï¼‰
