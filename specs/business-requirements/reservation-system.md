# 来店予約システム 業務要件定義書

## 1. プロジェクト概要

### 1.1 背景

飲食店や美容室、医療機関などの店舗において、電話やメールでの予約管理は煩雑で、ダブルブッキングや予約の見落としなどの問題が発生しやすい。また、顧客側も営業時間内に電話をする必要があり、利便性が低い。

### 1.2 目的

オンラインで24時間予約可能なシステムを構築し、店舗側の予約管理業務を効率化するとともに、顧客の利便性を向上させる。

### 1.3 スコープ

**含まれるもの:**
- 顧客による予約登録・変更・キャンセル機能
- 店舗スタッフによる予約管理機能
- 予約状況の可視化
- 予約枠の設定・管理

**含まれないもの:**
- 通知機能（メール、SMS）※将来の拡張として想定
- 決済機能（将来の拡張として想定）
- 顧客の会員管理システム（既存システムと連携）
- 在庫管理・POS連携

## 2. ステークホルダー

### 2.1 顧客（Customer）

**役割:** サービスを利用するために予約を行う

**ニーズ:**
- 24時間いつでも予約したい
- 空き状況を簡単に確認したい
- 予約内容を変更・キャンセルしたい

**成功基準:**
- 予約完了までの操作時間が3分以内
- スマートフォンからの予約が全体の70%以上

### 2.2 店舗スタッフ（Store Staff）

**役割:** 予約を管理し、顧客対応を行う

**ニーズ:**
- 予約状況を一目で確認したい
- 緊急時の予約調整が簡単にできる
- 顧客情報を参照したい
- 予約の統計情報を見たい

**成功基準:**
- 予約確認作業時間が従来比50%削減
- ダブルブッキング発生率0%

### 2.3 店舗管理者（Store Manager）

**役割:** 予約枠の設定や営業カレンダーを管理

**ニーズ:**
- 営業日・営業時間を柔軟に設定したい
- 予約枠の設定を簡単に変更したい
- 予約実績のレポートを確認したい
- スタッフの権限管理をしたい

**成功基準:**
- 予約枠設定変更が5分以内に完了
- 月次レポートが自動生成される

### 2.4 システム管理者（System Administrator）

**役割:** システム全体の運用・保守

**ニーズ:**
- システムの稼働状況を監視したい
- バックアップを自動化したい
- セキュリティを維持したい

**成功基準:**
- システム稼働率99.9%以上
- データバックアップが毎日自動実行

## 3. 業務フロー

### 3.1 予約登録フロー（顧客側）

1. 予約サイトにアクセス
2. 日時を選択（空き状況を確認）
3. サービス内容を選択
4. 顧客情報を入力（氏名、連絡先など）
5. 予約内容を確認
6. 予約を確定
7. 予約完了画面を表示（予約番号を発行）

### 3.2 予約管理フロー（店舗側）

1. 管理画面にログイン
2. 当日の予約一覧を確認
3. 予約詳細を確認（顧客情報、要望など）
4. 必要に応じて予約を調整
5. 顧客来店時にステータスを更新
6. サービス提供後、完了ステータスに変更

### 3.3 予約変更・キャンセルフロー

1. 顧客が予約確認ページにアクセス（予約番号で検索）
2. 予約内容を表示
3. 変更またはキャンセルを選択
4. 変更の場合: 新しい日時を選択
5. 確定
6. 変更・キャンセル完了画面を表示

## 4. 機能要件

### FR-001: 予約登録機能

**優先度:** 高

**説明:** 顧客がオンラインで予約を登録できる

**詳細要件:**
- FR-001-01: 日時選択（カレンダーUIで空き状況表示）
- FR-001-02: サービスメニュー選択（複数選択可）
- FR-001-03: 顧客情報入力（氏名、電話番号、メールアドレス、特記事項）
- FR-001-04: 入力内容の確認画面表示
- FR-001-05: 予約確定処理
- FR-001-06: 予約番号の発行と表示

**受入基準:**
- 予約完了まで3分以内
- 入力エラーは即座に表示
- 予約番号が即座に発行される

### FR-002: 予約変更・キャンセル機能

**優先度:** 高

**説明:** 顧客が登録済み予約を変更またはキャンセルできる

**詳細要件:**
- FR-002-01: 予約確認（予約番号で検索）
- FR-002-02: 予約内容表示
- FR-002-03: 日時変更（新しい空き枠から選択）
- FR-002-04: キャンセル処理
- FR-002-05: 変更・キャンセル完了画面表示

**受入基準:**
- キャンセル期限内であればワンクリックでキャンセル可能
- 変更完了後、即座に更新が反映される

### FR-003: 予約一覧表示機能（店舗側）

**優先度:** 高

**説明:** 店舗スタッフが予約状況を一覧表示できる

**詳細要件:**
- FR-003-01: 日別予約一覧表示
- FR-003-02: 週間予約一覧表示
- FR-003-03: 予約ステータス別フィルタ（確定、キャンセル、完了）
- FR-003-04: 顧客名での検索
- FR-003-05: 予約詳細の表示

**受入基準:**
- 一覧表示が1秒以内
- 当日予約が色分けされて表示

### FR-004: 予約枠設定機能

**優先度:** 中

**説明:** 店舗管理者が予約可能な日時とサービスを設定できる

**詳細要件:**
- FR-004-01: 営業日・休業日の設定
- FR-004-02: 営業時間の設定
- FR-004-03: 予約枠の時間間隔設定（15分、30分、1時間など）
- FR-004-04: サービスごとの所要時間設定
- FR-004-05: 同時受付可能数の設定

**受入基準:**
- 設定変更が即座に予約画面に反映
- 過去の予約に影響しない

### FR-005: レポート機能

**優先度:** 低

**説明:** 予約実績の統計情報を表示する

**詳細要件:**
- FR-005-01: 期間別予約件数
- FR-005-02: サービス別利用状況
- FR-005-03: 時間帯別予約状況
- FR-005-04: キャンセル率
- FR-005-05: CSV出力

**受入基準:**
- レポート生成が5秒以内
- 過去1年分のデータを参照可能

## 5. 非機能要件

### NFR-001: パフォーマンス

- ページ読み込み時間: 2秒以内（PC、スマートフォンともに）
- 予約処理時間: 1秒以内
- 同時アクセス: 100ユーザーまで対応
- データベース応答時間: 100ms以内

### NFR-002: 可用性

- システム稼働率: 99.9%以上
- メンテナンス時間: 月1回、深夜帯（2:00-4:00）
- バックアップ: 毎日自動実行、過去30日分保持

### NFR-003: セキュリティ

- 通信: HTTPS必須
- 個人情報: 暗号化保存
- 認証: パスワードハッシュ化（bcrypt使用）
- セッション: タイムアウト30分
- ログ: アクセスログ、エラーログを記録

### NFR-004: ユーザビリティ

- レスポンシブデザイン対応（PC、タブレット、スマートフォン）
- アクセシビリティ: WCAG 2.1 Level AA準拠
- 多言語対応: 日本語、英語
- ブラウザ対応: Chrome、Firefox、Safari、Edge（最新版および1つ前のバージョン）

### NFR-005: 保守性

- コード品質: TypeScript Strict Mode使用
- テストカバレッジ: 80%以上
- ドキュメント: APIドキュメント自動生成
- ログレベル: DEBUG、INFO、WARN、ERROR

### NFR-006: 拡張性

- マイクロサービスアーキテクチャ採用
- API設計: RESTful API
- データベース: スケーラブルな設計
- 外部連携: Webhook対応

## 6. 制約条件

### 6.1 技術的制約

- バックエンド: Node.js（Bun）+ TypeScript
- フロントエンド: React + TypeScript
- データベース: PostgreSQL
- インフラ: クラウドサービス（AWS想定）

### 6.2 ビジネス制約

- 予算: 初期開発費用は500万円以内
- 期間: 開発期間は6ヶ月以内
- リソース: 開発チーム3-5名

### 6.3 法的制約

- 個人情報保護法に準拠
- 予約情報の保存期間: 最大2年間
- データ削除要求への対応（GDPR準拠）

## 7. 成功指標（KPI）

### 7.1 ビジネス指標

- オンライン予約率: 80%以上（3ヶ月後）
- 予約キャンセル率: 10%以下
- 顧客満足度: 4.5/5.0以上
- リピート率: 60%以上

### 7.2 運用指標

- システム稼働率: 99.9%以上
- 平均応答時間: 1秒以内
- エラー発生率: 0.1%以下
- ダブルブッキング発生: 0件

### 7.3 開発指標

- 開発完了: スケジュール通り（±10%以内）
- バグ発生率: Critical 0件、High 5件以下
- テストカバレッジ: 80%以上

## 8. 用語集

| 用語 | 定義 |
|------|------|
| 予約枠 | 予約可能な時間帯の単位。サービス内容と所要時間により決定 |
| 予約ステータス | 予約の状態（確定、キャンセル、完了、ノーショー） |
| ダブルブッキング | 同じ時間帯に複数の予約が重複して入る状態 |
| リマインダー | 予約日時の前に送信される確認通知 |
| ノーショー | 予約したが来店しなかった状態 |
| 営業カレンダー | 営業日、休業日、営業時間を管理するカレンダー |

## 9. 添付資料

- 画面遷移図（別紙）
- ER図（別紙）
- システム構成図（別紙）
- API仕様書（別紙）
