{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ukiyoue.example.org/schemas/layer3/test-plan.json",
  "title": "Test Plan",
  "description": "テスト計画（ARCH-TESTPLAN）: テスト全体の戦略とスケジュールを計画",
  "allOf": [{ "$ref": "../_common.json#/definitions/baseArtifact" }],
  "type": "object",
  "required": ["title", "testStrategy"],
  "properties": {
    "@type": {
      "const": "TestPlan"
    },
    "title": {
      "type": "string",
      "minLength": 1
    },
    "testStrategy": {
      "type": "string",
      "description": "何をどこまでテストするか（範囲、深さ、優先度）"
    },
    "testLevels": {
      "type": "object",
      "properties": {
        "functionalTests": {
          "type": "string",
          "description": "ユニットテスト、統合テスト、E2Eテスト"
        },
        "nonFunctionalTests": {
          "type": "string",
          "description": "性能テスト、セキュリティテスト、可用性テスト、運用性テスト"
        }
      }
    },
    "testEnvironment": {
      "type": "string",
      "description": "テスト用インフラ、データ、ツール"
    },
    "resourcePlan": {
      "type": "object",
      "properties": {
        "testers": { "type": "string" },
        "effort": { "type": "string" },
        "schedule": { "type": "string" }
      }
    },
    "qualityCriteria": {
      "type": "object",
      "properties": {
        "passCriteria": { "type": "string" },
        "coverageTarget": { "type": "string" }
      }
    },
    "riskManagement": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "risk": { "type": "string" },
          "mitigation": { "type": "string" }
        }
      }
    }
  },
  "additionalProperties": false
}
